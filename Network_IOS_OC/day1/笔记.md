# 网络基本知识

- C/S：客户端（应用）----服务器

B/S：浏览器-------服务器

- APP经常使用http协议

- **请求，响应**

- 内网服务器：局域网的服务器

![image-20211029161616757](%E7%AC%94%E8%AE%B0.assets/image-20211029161616757.png)

![image-20211029161905341](%E7%AC%94%E8%AE%B0.assets/image-20211029161905341.png)

- http协议默认端口号80

# http协议

![image-20211029162954632](%E7%AC%94%E8%AE%B0.assets/image-20211029162954632.png)

- 协议规定url请求和响应格式

- 网页上所有内容都可以看成超文本（声音，图片，，，）

- 不止浏览器遵守http协议，app等等也用

- ip地址：标志唯一一个计算机，用它来确定服务器

- DNS服务器：把域名解析成ip地址

  ![image-20211029164100852](%E7%AC%94%E8%AE%B0.assets/image-20211029164100852.png)

- 114.114.114.114是国内移动、电信和联通通用的DNS，解析成功率相对来说更高，国内用户使用的比较多，速度相对快、稳定，是国内用户上网常用的DNS。8.8.8.8是GOOGLE公司提供的DNS，该地址是全球通用的，相对来说，更适合国外以及访问国外网站的用户使用。

# ATS

```objective-c
    <key>NSAppTransportSecurity</key>
    <dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
    </dict>
```

把它封装成了代码块

使用<ATS

# http请求

![image-20211029170853890](%E7%AC%94%E8%AE%B0.assets/image-20211029170853890.png)

 # 编码

- Unicode通用的一个编码

**具体使用UTF8**

- 所有的编码都兼容ASK||编码

# IP地址

- 为了来标记唯一的计算机

![image-20211029201743375](%E7%AC%94%E8%AE%B0.assets/image-20211029201743375.png)

- 测试网卡

![image-20211029202515537](%E7%AC%94%E8%AE%B0.assets/image-20211029202515537.png)

- 每一个网卡都会分配一个ip

一个电脑的不同IP可能连接不同的网络

一次只能连接一个网络

# 端口号

![image-20211029203142741](%E7%AC%94%E8%AE%B0.assets/image-20211029203142741.png)

# 网络模型

![image-20211029203438810](%E7%AC%94%E8%AE%B0.assets/image-20211029203438810.png)

![image-20211029203512804](%E7%AC%94%E8%AE%B0.assets/image-20211029203512804.png)

- 端到端的传输：两台电脑，通过软件传输

- 主机到主机到传输：通过IP

![image-20211029204944689](%E7%AC%94%E8%AE%B0.assets/image-20211029204944689.png)

## 传输协议

TCP比UDP效率低，正确率高

- http使用TCP协议

- TCP只能一对一发

# socket

![image-20211029210331110](%E7%AC%94%E8%AE%B0.assets/image-20211029210331110.png)

![image-20211029210354130](%E7%AC%94%E8%AE%B0.assets/image-20211029210354130.png)

- Socket位于应用层与传输层之间

- 我们写app时只要把数据给socket就可以，之后操作系统会搞定

![image-20211029210727321](%E7%AC%94%E8%AE%B0.assets/image-20211029210727321.png)

## 创建socket

![image-20211030110853057](%E7%AC%94%E8%AE%B0.assets/image-20211030110853057.png)

## 连接服务器

![image-20211030110945334](%E7%AC%94%E8%AE%B0.assets/image-20211030110945334.png)

先和服务器建立连接，才能使用socket收发数据

先有电话线才能打电话

## socket收发数据

![image-20211030114716593](%E7%AC%94%E8%AE%B0.assets/image-20211030114716593.png)

- 把OC字符串转换C语言字符串

```objective-c
.UTF8String
```

- 根据域名找ip地址：

终端：ping www.baidu.com

control C结束

![image-20211030190811548](%E7%AC%94%E8%AE%B0.assets/image-20211030190811548.png)

- 字符串比较长的话

'\r'是回车，'\n'是换行，前者使光标到行首，后者使光标下移一格。

- 与服务器的连接方式：

短链接：获得服务器的数据之后（响应结束后），断开连接，使服务器可以服务更多的人

长连接：获得服务器的数据之后，不断开连接，等一段时间，如果没有使用这段连接，就会销毁该连接

一个网页会发送许多请求，这些请求就可以共用一个连接

![image-20211030220857743](%E7%AC%94%E8%AE%B0.assets/image-20211030220857743.png)

![image-20211030220905686](%E7%AC%94%E8%AE%B0.assets/image-20211030220905686.png)

