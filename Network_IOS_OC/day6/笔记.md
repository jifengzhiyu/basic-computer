# NSURLSession

![image-20211106104138074](%E7%AC%94%E8%AE%B0.assets/image-20211106104138074.png)

- connection运行在当前线程的消息循环中（太底层

想要在子线程运行要把代理设在子线程上，还要专门开启子线程的消息循环

- Session默认子线程

- Connection 面向请求 响应

Session 面向任务

## DataTask

![image-20211106105547204](%E7%AC%94%E8%AE%B0.assets/image-20211106105547204.png)

- 默认get请求

## DownloadTask

默认下载到temp，下载完毕自动删除

![image-20211106115209612](%E7%AC%94%E8%AE%B0.assets/image-20211106115209612.png)

- 默认在子线程

- 会自动控制内存 不暴涨

### 下载进度

![image-20211106115400088](%E7%AC%94%E8%AE%B0.assets/image-20211106115400088.png)

