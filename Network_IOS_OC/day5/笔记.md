# Head请求

![image-20211104231510612](%E7%AC%94%E8%AE%B0.assets/image-20211104231510612.png)

# NSURLConnection下载

![image-20211105100213434](%E7%AC%94%E8%AE%B0.assets/image-20211105100213434.png)

- 下载：发送get请求，获取数据

## 解决内存暴涨

![image-20211105102053581](%E7%AC%94%E8%AE%B0.assets/image-20211105102053581.png)

![image-20211105105837032](%E7%AC%94%E8%AE%B0.assets/image-20211105105837032.png)

![image-20211105112533116](%E7%AC%94%E8%AE%B0.assets/image-20211105112533116.png)

- 内存暴涨的原因：

下载一部分，内存存储一部分（拼接过程中，内存暴涨），下载完成再保存文件，销毁之前的内存数据

解决：下载一点，保存一点

![image-20211105112825660](%E7%AC%94%E8%AE%B0.assets/image-20211105112825660.png)

![image-20211105113858264](%E7%AC%94%E8%AE%B0.assets/image-20211105113858264.png)

![image-20211105115807332](%E7%AC%94%E8%AE%B0.assets/image-20211105115807332.png)

   **FileHandel & stream 建议用stream**

## 断点续传  

![image-20211105145424971](%E7%AC%94%E8%AE%B0.assets/image-20211105145424971.png)

- 接着上次继续下载

![image-20211105163734179](%E7%AC%94%E8%AE%B0.assets/image-20211105163734179.png)

![image-20211105174226370](%E7%AC%94%E8%AE%B0.assets/image-20211105174226370.png)

- 给自定义指定的属性赋值 默认值

## 暂停下载

![image-20211105201303686](%E7%AC%94%E8%AE%B0.assets/image-20211105201303686.png)

 ## 下载一次

![image-20211105223137508](%E7%AC%94%E8%AE%B0.assets/image-20211105223137508.png)

![image-20211105223153601](%E7%AC%94%E8%AE%B0.assets/image-20211105223153601.png)

## 自定义operation

- 可以把当前正在进行的任务取消

- 需要重写main 
- 
